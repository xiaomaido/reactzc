webpackJsonp([11],{304:function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Confirm = __webpack_require__(331);\n\nvar _Confirm2 = _interopRequireDefault(_Confirm);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar initStateResponse = {\n\tdata: {\n\t\timgs: [],\n\t\tseller_info: {},\n\t\tis_like: 0,\n\t\tlike_count: 0\n\t}\n};\nvar API_MY_COUPON_RECEIVE = APIS.API_MY_COUPON_RECEIVE;\nvar API_PAGE = APIS.API_MY_COUPON_DETAIL;\nvar FETCH_PAGE = TYPES.FETCH_EAT_TIME_DETAIL;\n\nvar Index = function (_Quyou) {\n\t_inherits(Index, _Quyou);\n\n\tfunction Index() {\n\t\tvar _ref;\n\n\t\tvar _temp, _this, _ret;\n\n\t\t_classCallCheck(this, Index);\n\n\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\targs[_key] = arguments[_key];\n\t\t}\n\n\t\treturn _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Index.__proto__ || Object.getPrototypeOf(Index)).call.apply(_ref, [this].concat(args))), _this), _this.state = _defineProperty({}, FETCH_PAGE, {\n\t\t\tresponse: initStateResponse\n\t\t}), _temp), _possibleConstructorReturn(_this, _ret);\n\t}\n\n\t_createClass(Index, [{\n\t\tkey: "renderContent",\n\t\tvalue: function renderContent() {\n\t\t\tvar me = this;\n\t\t\tvar _me$state$FETCH_PAGE = me.state[FETCH_PAGE],\n\t\t\t    fetching = _me$state$FETCH_PAGE.fetching,\n\t\t\t    _me$state$FETCH_PAGE$ = _me$state$FETCH_PAGE.response,\n\t\t\t    response = _me$state$FETCH_PAGE$ === undefined ? initStateResponse : _me$state$FETCH_PAGE$;\n\n\t\t\treturn fetching ? React.createElement(Spin, null) : React.createElement(Content, { response: response, me: me, handleReceiveCoupon: me.handleReceiveCoupon.bind(me) });\n\t\t}\n\t}, {\n\t\tkey: "componentDidMount",\n\t\tvalue: function componentDidMount() {\n\t\t\tvar me = this;\n\t\t\tme.requestDetail(me, FETCH_PAGE, API_PAGE);\n\t\t}\n\t}, {\n\t\tkey: "handleReceiveCoupon",\n\t\tvalue: function handleReceiveCoupon(_ref2) {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar coupon_id = _ref2.coupon_id,\n\t\t\t    stock = _ref2.stock;\n\n\t\t\tvar me = this;\n\t\t\tif (stock) {\n\t\t\t\tme.requestAPI(API_MY_COUPON_RECEIVE, {\n\t\t\t\t\tcoupon_id: coupon_id,\n\t\t\t\t\ttoken: me.user.token\n\t\t\t\t}, function () {\n\t\t\t\t\tvar response = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\t\t\t\tvar _response$code = response.code,\n\t\t\t\t\t    code = _response$code === undefined ? -1 : _response$code,\n\t\t\t\t\t    _response$data = response.data,\n\t\t\t\t\t    data = _response$data === undefined ? "" : _response$data,\n\t\t\t\t\t    _response$msg = response.msg,\n\t\t\t\t\t    msg = _response$msg === undefined ? "" : _response$msg;\n\t\t\t\t\t// {"msg":"已经领取","data":"","code":20012}\n\n\t\t\t\t\tif (code) {\n\t\t\t\t\t\tvar codeMap = {\n\t\t\t\t\t\t\t\'20012\': \'您已经领取过该优惠券哦！\'\n\t\t\t\t\t\t};\n\t\t\t\t\t\t_Confirm2.default.show({\n\t\t\t\t\t\t\ttitle: \'领取失败\',\n\t\t\t\t\t\t\tdesc: codeMap[code] || msg,\n\t\t\t\t\t\t\tcallBacks: [\n\t\t\t\t\t\t\t// {text: \'我知道了\', onClick: () => {Confirm.close()}},\n\t\t\t\t\t\t\t// {text: \'选择2\', onClick: () => {}}\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext: \'查看优惠券\',\n\t\t\t\t\t\t\t\tonClick: function onClick() {\n\t\t\t\t\t\t\t\t\t_Confirm2.default.close();\n\t\t\t\t\t\t\t\t\tme.openPage("/mycoupons?ltype=0");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// {"msg":"","data":true,"code":0}\n\t\t\t\t\t_Confirm2.default.show({\n\t\t\t\t\t\ttitle: \'领取成功\',\n\t\t\t\t\t\tdesc: \'快去使用吧~\',\n\t\t\t\t\t\tcallBacks: [{\n\t\t\t\t\t\t\ttext: \'查看优惠券\',\n\t\t\t\t\t\t\tonClick: function onClick() {\n\t\t\t\t\t\t\t\t_Confirm2.default.close();\n\t\t\t\t\t\t\t\tme.openPage("/mycoupons?ltype=0");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}]\n\t\t\t\t\t});\n\t\t\t\t\tvar FETCH_TEMP = me.state[FETCH_PAGE];\n\t\t\t\t\tvar temp = FETCH_TEMP.response.data.coupon.find(function (d) {\n\t\t\t\t\t\treturn d.id === coupon_id;\n\t\t\t\t\t});\n\t\t\t\t\ttemp.reciev_count += 1;\n\t\t\t\t\t_this2.setState(_defineProperty({}, FETCH_PAGE, FETCH_TEMP));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}]);\n\n\treturn Index;\n}(Quyou);\n\nexports.default = Index;\n\n\nvar Content = function Content(props) {\n\tvar response = props.response,\n\t    me = props.me,\n\t    handleReceiveCoupon = props.handleReceiveCoupon;\n\tvar _response$data2 = response.data,\n\t    data = _response$data2 === undefined ? { imgs: [] } : _response$data2;\n\t// data.start_dt = 1538409599\n\t// data.end_dt = 1538409999\n\n\tvar available = data.status === \'0010\' ? false : Boolean(Date.now() >= data.start_dt * 1000 && data.end_dt * 1000);\n\tconsole.log(\'available\', available);\n\treturn data.id ? React.createElement(\n\t\t"div",\n\t\t{ className: "xian-shi-fu-li-detail coupon-detail" },\n\t\tReact.createElement(\n\t\t\t"div",\n\t\t\t{ className: "fixed-footer-xian-shi" },\n\t\t\tReact.createElement(\n\t\t\t\t"div",\n\t\t\t\t{ className: "left" },\n\t\t\t\tReact.createElement("div", { className: "clearboth thinner-border" }),\n\t\t\t\tReact.createElement(\n\t\t\t\t\t"div",\n\t\t\t\t\t{ className: "price", style: { fontSize: \'.6rem\', marginTop: \'.35rem\' } },\n\t\t\t\t\t"\\u5F00\\u59CB\\u65F6\\u95F4: ",\n\t\t\t\t\tmisc.formatDateTime(new Date(data.start_dt * 1000), misc.formatType[\'4\'])\n\t\t\t\t),\n\t\t\t\tReact.createElement(\n\t\t\t\t\t"div",\n\t\t\t\t\t{ className: "price", style: { fontSize: \'.6rem\' } },\n\t\t\t\t\t"\\u7ED3\\u675F\\u65F6\\u95F4: ",\n\t\t\t\t\tmisc.formatDateTime(new Date(data.end_dt * 1000), misc.formatType[\'4\'])\n\t\t\t\t)\n\t\t\t),\n\t\t\tReact.createElement(\n\t\t\t\t"div",\n\t\t\t\t{\n\t\t\t\t\tclassName: classnames({ right: true, disable: !available }),\n\t\t\t\t\tonClick: function onClick() {\n\t\t\t\t\t\tif (available) {\n\t\t\t\t\t\t\thandleReceiveCoupon({\n\t\t\t\t\t\t\t\tcoupon_id: data.id,\n\t\t\t\t\t\t\t\tstock: data.stock\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdata.status === \'0010\' ? \'仅兑换码领取\' : data.stock ? "\\u7ACB\\u5373\\u9886\\u53D6" : "\\u5DF2\\u9886\\u53D6\\u5B8C"\n\t\t\t)\n\t\t),\n\t\tReact.createElement("div", { className: "icon cover", style: { backgroundImage: "url(" + (data.imgs[0] + doImg.fw(500)) + ")", backgroundPosition: \'right\' } }),\n\t\tReact.createElement(\n\t\t\t"div",\n\t\t\t{ className: "fu-li" },\n\t\t\tReact.createElement(\n\t\t\t\t"div",\n\t\t\t\t{ className: "name" },\n\t\t\t\t"[",\n\t\t\t\tdata.title,\n\t\t\t\t"] ",\n\t\t\t\tdata.desc_title\n\t\t\t),\n\t\t\tReact.createElement(\n\t\t\t\t"div",\n\t\t\t\t{ className: "remain" },\n\t\t\t\tReact.createElement(\n\t\t\t\t\t"span",\n\t\t\t\t\tnull,\n\t\t\t\t\tdata.reciev_count\n\t\t\t\t),\n\t\t\t\t" \\u4EBA\\u5DF2\\u9886\\u53D6"\n\t\t\t)\n\t\t),\n\t\tReact.createElement(Intro, { data: data.seller }),\n\t\tReact.createElement(\n\t\t\t"div",\n\t\t\t{ className: "publish" },\n\t\t\tReact.createElement(\n\t\t\t\t"div",\n\t\t\t\t{ className: "title" },\n\t\t\t\t"\\u4F7F\\u7528\\u987B\\u77E5"\n\t\t\t),\n\t\t\tReact.createElement("div", { className: "clearboth thinner-border" }),\n\t\t\tReact.createElement("div", { style: { paddingTop: \'0.5rem\', paddingRight: \'1.1rem\' }, dangerouslySetInnerHTML: { __html: data.description || \'\' } }),\n\t\t\tReact.createElement("div", { className: "clearboth" })\n\t\t)\n\t) : null;\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/quyou/MyCouponDetail.js\n// module id = 304\n// module chunks = 11\n\n//# sourceURL=webpack:///./src/pages/quyou/MyCouponDetail.js?')},331:function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(67);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\n__webpack_require__(332);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n title,\n desc,\n callBacks: [\n   {text, onClick}\n ]\n */\n\nvar Confirm = function (_React$PureComponent) {\n    _inherits(Confirm, _React$PureComponent);\n\n    function Confirm() {\n        var _ref;\n\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, Confirm);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Confirm.__proto__ || Object.getPrototypeOf(Confirm)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n            active: 0,\n            close: false\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    _createClass(Confirm, [{\n        key: 'close',\n        value: function close() {\n            this.setState({ close: true });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var _props$content = this.props.content,\n                title = _props$content.title,\n                desc = _props$content.desc,\n                subDesc = _props$content.subDesc,\n                _props$content$callBa = _props$content.callBacks,\n                callBacks = _props$content$callBa === undefined ? [] : _props$content$callBa;\n\n\n            var closeClass = '';\n            if (this.state.close) {\n                closeClass = 'close';\n            }\n            return _react2.default.createElement(\n                'div',\n                { className: 'qy-confirm-parent ' + closeClass },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'qy-confirm' },\n                    _react2.default.createElement('div', { className: 'close', onClick: function onClick() {\n                            return _this2.setState({ close: true });\n                        } }),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'content' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'title' },\n                            title\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'desc' },\n                            desc\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'buttons' },\n                            callBacks.map(function (item, index) {\n                                var activeClass = '';\n                                if (index === _this2.state.active) {\n                                    activeClass = 'active';\n                                }\n                                return _react2.default.createElement(\n                                    'div',\n                                    { key: index, className: 'button ' + activeClass, onClick: function onClick() {\n                                            _this2.setState({ active: index });\n                                            item.onClick(index);\n                                        } },\n                                    item.text\n                                );\n                            })\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return Confirm;\n}(_react2.default.PureComponent);\n\nvar model = null;\n\nexports.default = {\n    show: function show(content) {\n        var div = document.createElement('div');\n        document.body.appendChild(div);\n        _reactDom2.default.render(_react2.default.createElement(Confirm, { ref: function ref(t) {\n                return model = t;\n            }, content: content }), div);\n    },\n    close: function close() {\n        model.close();\n    }\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Confirm/index.js\n// module id = 331\n// module chunks = 10 11\n\n//# sourceURL=webpack:///./src/components/Confirm/index.js?")},332:function(module,exports){eval("// removed by extract-text-webpack-plugin\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Confirm/index.scss\n// module id = 332\n// module chunks = 10 11\n\n//# sourceURL=webpack:///./src/components/Confirm/index.scss?")}});