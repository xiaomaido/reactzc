webpackJsonp([5],{317:function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n__webpack_require__(338);\n\nvar _app = __webpack_require__(359);\n\nvar _app2 = _interopRequireDefault(_app);\n\nvar _signin = __webpack_require__(360);\n\nvar _signin2 = _interopRequireDefault(_signin);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar seconds = 60 * 3;\nvar smsLength = 4;\nvar isDoing = '正在';\n\nvar Index = function (_Quyou) {\n    _inherits(Index, _Quyou);\n\n    function Index() {\n        var _ref;\n\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, Index);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Index.__proto__ || Object.getPrototypeOf(Index)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n            validityState: '',\n            sendStatus: 0,\n            countTime: seconds\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    _createClass(Index, [{\n        key: 'validityStateEmpty',\n        value: function validityStateEmpty(me) {\n            this.time1 = setTimeout(function () {\n                me.setState({\n                    validityState: ''\n                });\n            }, 800);\n        }\n    }, {\n        key: 'handleSendSMSClick',\n        value: function handleSendSMSClick(e) {\n            var me = this;\n            var validityState = me.state.validityState;\n\n            if (validityState.indexOf('正在') >= 0) {\n                return;\n            }\n            var mobile = me.refs.mobile;\n\n            if (!mobile.value) {\n                me.setState({\n                    validityState: '手机号码不能为空！'\n                });\n                me.validityStateEmpty(me);\n                return;\n            }\n            if (!misc.validatePhone(mobile.value)) {\n                me.setState({\n                    validityState: '手机号码不合规则！'\n                });\n                me.validityStateEmpty(me);\n                return;\n            }\n            me.setState({\n                validityState: '正在发送...'\n            });\n            me.requestAPI(APIS.API_MY_GET_LOGIN_CODE, {\n                mobile: mobile.value\n            }, function (response) {\n                // {\"msg\":\"\",\"data\":true,\"code\":0}\n                var msg = response.msg,\n                    code = response.code;\n\n                if (code) {\n                    me.setState({\n                        validityState: msg\n                    });\n                } else {\n                    me.setState({\n                        validityState: '短信已发送，请查收！'\n                    });\n                    me.setState({\n                        sendStatus: 1\n                    });\n                    me.interval = setInterval(function () {\n                        var countTime = me.state.countTime;\n\n                        --countTime;\n                        me.setState({\n                            countTime: countTime\n                        });\n                        if (countTime === 0) {\n                            clearInterval(me.interval);\n                            me.setState({\n                                sendStatus: 2,\n                                countTime: seconds\n                            });\n                        }\n                    }, 1000);\n                }\n                me.validityStateEmpty(me);\n            });\n        }\n    }, {\n        key: 'handleSignInClick',\n        value: function handleSignInClick(e) {\n            var me = this;\n            var validityState = me.state.validityState;\n\n            if (validityState.indexOf('正在') >= 0) {\n                return;\n            }\n            var _me$refs = me.refs,\n                mobile = _me$refs.mobile,\n                sms = _me$refs.sms;\n\n            if (!mobile.value) {\n                me.setState({\n                    validityState: '手机号码不能为空！'\n                });\n                me.validityStateEmpty(me);\n                return;\n            }\n            if (!misc.validatePhone(mobile.value)) {\n                me.setState({\n                    validityState: '手机号码不合规则！'\n                });\n                me.validityStateEmpty(me);\n                return;\n            }\n            if (!sms.value) {\n                me.setState({\n                    validityState: '短信验证码不能为空！'\n                });\n                me.validityStateEmpty(me);\n                return;\n            }\n            if (sms.value.length !== smsLength) {\n                me.setState({\n                    validityState: '\\u77ED\\u4FE1\\u9A8C\\u8BC1\\u7801\\u5E94\\u662F' + smsLength + '\\u4F4D\\u5B57\\u7B26\\uFF01'\n                });\n                me.validityStateEmpty(me);\n                return;\n            }\n            me.setState({\n                validityState: '正在登录...'\n            });\n            me.requestAPI(APIS.API_MY_CHECK_LOGIN_CODE, {\n                mobile: mobile.value,\n                code: sms.value\n            }, function (response) {\n                var msg = response.msg,\n                    code = response.code,\n                    _response$data = response.data,\n                    data = _response$data === undefined ? {} : _response$data;\n\n                if (code) {\n                    me.setState({\n                        validityState: msg\n                    });\n                    me.validityStateEmpty(me);\n                } else {\n                    misc.setCookie('user', JSON.stringify(_extends({}, data, { mobile: mobile.value })));\n\n                    me.setState({\n                        validityState: '登录成功！'\n                    }, function () {\n                        me.jump = setTimeout(function () {\n                            me.handleBack();\n                        }, 800);\n                    });\n                }\n            });\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            document.body.style.overflowY = 'hidden';\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.interval && clearInterval(this.interval);\n            this.time1 && clearTimeout(this.time1);\n            this.jump && clearTimeout(this.jump);\n            document.body.style.overflowY = 'auto';\n        }\n    }, {\n        key: 'handleBack',\n        value: function handleBack() {\n            window.history.back();\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var me = this;\n            var _props = this.props,\n                _props$handleSendSMS = _props.handleSendSMS,\n                handleSendSMS = _props$handleSendSMS === undefined ? function (e) {} : _props$handleSendSMS,\n                _props$handleSignIn = _props.handleSignIn,\n                handleSignIn = _props$handleSignIn === undefined ? function (e) {} : _props$handleSignIn;\n            var _state = this.state,\n                validityState = _state.validityState,\n                sendStatus = _state.sendStatus,\n                countTime = _state.countTime;\n\n            return React.createElement(\n                'div',\n                { className: 'sign' },\n                React.createElement(\n                    'div',\n                    { className: 'close', onClick: me.handleBack },\n                    React.createElement('i', { className: 'icon' })\n                ),\n                React.createElement('img', { className: 'app', src: _app2.default }),\n                React.createElement(\n                    'div',\n                    { className: 'input-list' },\n                    React.createElement(\n                        'div',\n                        { className: 'input-item' },\n                        React.createElement(\n                            'div',\n                            { className: 'txt' },\n                            '\\u624B\\u673A\\u53F7'\n                        ),\n                        React.createElement('input', { onBlur: function onBlur() {\n                                document.documentElement.scrollTop = document.body.scrollTop = 0;\n                            }, type: 'tel', placeholder: '\\u70B9\\u6B64\\u8F93\\u5165\\u624B\\u673A\\u53F7\\u7801', maxLength: '11', ref: 'mobile', defaultValue: '', autoFocus: true })\n                    ),\n                    React.createElement('div', { className: 'clearboth thinner-border' }),\n                    React.createElement(\n                        'div',\n                        { className: 'input-item' },\n                        React.createElement(\n                            'div',\n                            { className: classnames({ sms: true, disable: sendStatus === 1 }), onClick: this.handleSendSMSClick.bind(this) },\n                            sendStatus ? sendStatus > 1 ? '\\u91CD\\u65B0\\u53D1\\u9001' : countTime + ' s' : '\\u53D1\\u9001\\u77ED\\u4FE1'\n                        ),\n                        React.createElement(\n                            'div',\n                            { className: 'txt' },\n                            '\\u9A8C\\u8BC1\\u7801'\n                        ),\n                        React.createElement('input', { onBlur: function onBlur() {\n                                document.documentElement.scrollTop = document.body.scrollTop = 0;\n                            }, type: 'tel', placeholder: '\\u70B9\\u6B64\\u8F93\\u5165\\u77ED\\u4FE1\\u9A8C\\u8BC1\\u7801', maxLength: smsLength, ref: 'sms', defaultValue: '' })\n                    ),\n                    React.createElement('div', { className: 'clearboth thinner-border' })\n                ),\n                React.createElement('div', { className: 'icon signin', style: { height: '2.75rem', backgroundImage: 'url(' + _signin2.default + ')' }, onClick: this.handleSignInClick.bind(this) }),\n                React.createElement(\n                    'div',\n                    { className: 'validate-result' },\n                    validityState\n                )\n            );\n        }\n    }]);\n\n    return Index;\n}(Quyou);\n\nexports.default = Index;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/quyou/Signin.js\n// module id = 317\n// module chunks = 5\n\n//# sourceURL=webpack:///./src/pages/quyou/Signin.js?")},338:function(module,exports){eval("// removed by extract-text-webpack-plugin\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Sign/index.scss\n// module id = 338\n// module chunks = 5\n\n//# sourceURL=webpack:///./src/components/Sign/index.scss?")},359:function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__.p + "./images/app.3be1df4721d173fca7ea46114b7e28e0.png";\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Sign/images/app.png\n// module id = 359\n// module chunks = 5\n\n//# sourceURL=webpack:///./src/components/Sign/images/app.png?')},360:function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__.p + "./images/signin.969d7cf2b92bd134b75eeb368ce96a1f.png";\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Sign/images/signin.png\n// module id = 360\n// module chunks = 5\n\n//# sourceURL=webpack:///./src/components/Sign/images/signin.png?')}});